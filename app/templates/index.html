{% extends "base.html" %}
{% block title %}Home - LogExp{% endblock %}
{% block content %}
  <h2>Welcome to LogExp</h2>
  <p>Use the navigation above to explore readings, diagnostics, and documentation.</p>

  <!-- Inline Poller Status -->
<script>
async function checkPollerStatus() {
  const response = await fetch("{{ url_for('api.poller_status') }}");
  const data = await response.json();
  document.getElementById("poller-status").innerText = data.status;
}
</script>

<button onclick="checkPollerStatus()">Check Poller Status</button>
<p><strong>Poller Status:</strong> <span id="poller-status"></span></p>


<div id="poller-controls">
  <button onclick="startPoller()">Start Poller</button>
  <button onclick="stopPoller()">Stop Poller</button>
  <p id="poller-result"></p>
</div>

<script>
async function startPoller() {
  const response = await fetch("{{ url_for('api.poller_start') }}", {method: "POST"});
  const data = await response.json();
  document.getElementById("poller-result").innerText = "Poller: " + data.status;
}

async function stopPoller() {
  const response = await fetch("{{ url_for('api.poller_stop') }}", {method: "POST"});
  const data = await response.json();
  document.getElementById("poller-result").innerText = "Poller: " + data.status;
}
</script>

{% endblock %}
